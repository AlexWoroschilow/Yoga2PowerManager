# ubuntu-power-manager
Попытка создать менеджер управления питанием для ноутбука. Изначально задумывался как небольшой хак системы для Lenovo Yoga 2 13. Но проект перерос себя и сейчас представляет из себя 2 части:

# Daemon
1. Небольшой демон на питоне, который стартует из под рута и постоянно висит в памяти. Демон имеет dBus интерфейс для взаимодействия с ним. Так же присутствуют настройки для него  же в /etc/power-manager/power-manager.ini при первом старте туда пишется список всех доступных модулей оптимизации питания. Вдохновление для демана черпалось из проекта powertop, в частности, подсказки для оптимизации питания были очень полезны. В настоящий момент питание оптимизируется для всех устройств, для которых есть подсказки в powertop usb и pci устройства рассматриваются как usb и pci шины соответственно, по этому оптиизация происходит для всех сразу, исключением является только сенсорный экран. Так же присутствует черный список. Управление питанием для этих устройств игнорируется. 

# Indicator
2. Индикатор для UnityPanel, отбражающий текущий статус для устройств (powersave/perfomance) в виде галочки или крестика. В настоящее время индикатор носит сугубо информационный характер и умеет только отображать статус.


# Как это работает
Основную магию выполняет демон. Он собирает события системы, такие как подключение/отключение питания, открытие/закрытие крышки ноутбука, подключение/отключение от беспороводной сети и выполняет или powersafe для всех устройств не из черного списка или perfomance. При этом по умолчанию считается что если ноутбук работает от батареи - необходимо экономить энергию, т.е. powersafe, если же работает от сети - то perfomance третьего не дано. Сведения о системе частично забираются с помощью acpi-events а так же с помощью dbus интерфейса для network-manager и UPower


